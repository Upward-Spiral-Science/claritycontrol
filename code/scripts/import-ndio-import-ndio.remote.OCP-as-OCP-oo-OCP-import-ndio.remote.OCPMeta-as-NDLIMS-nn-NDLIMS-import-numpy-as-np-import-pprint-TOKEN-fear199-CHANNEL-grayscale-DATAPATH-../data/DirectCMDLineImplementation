import ndio
import ndio.remote.OCP as OCP
oo = OCP()
import ndio.remote.OCPMeta as NDLIMS
nn = NDLIMS()
import numpy as np
import pprint

image_token = 'fear199'
annotation_token = 'Fear199StanfordABA'

metadata = oo.get_proj_info(annotation_token)
pprint.pprint(metadata,indent=4)


imagesSizes = metadata['dataset']['imagesize']
offset = metadata['dataset']['offset']

# channel_ROIs = nn.get_metadata(annotation_token)[‘channels’]
# There’s a problem with finding the channel
# Fear199ImageLddmmABA

n = u'5' # resolution

#print "ndio get cutout ... TOKEN=%s CHANNEL=%s RESOLUTION=%s"%(TOKEN,CHANNEL,n)

channel = ‘grayscale’


data = oo.get_cutout(image_token,channel,
                    offset[n][0],imagesSizes[n][0],
                    offset[n][1],imagesSizes[n][1],
                    offset[n][2],imagesSizes[n][2],
                    resolution=int(n)) 

